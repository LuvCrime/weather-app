(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{29:function(e,t,a){},3:function(e,t,a){e.exports={App:"AppModules_App__3M2lg",wrapper:"AppModules_wrapper__1LyVa",weatherInfo:"AppModules_weatherInfo__2izHt",extraWeatherInfo:"AppModules_extraWeatherInfo__2hdqI",name:"AppModules_name__Qoyi6",degree:"AppModules_degree__3Al0y",textField:"AppModules_textField__1bVl2",search:"AppModules_search__2L6Fe",icon:"AppModules_icon__3V4Fo",min:"AppModules_min__1uPz9",max:"AppModules_max__1sSiT",cloud:"AppModules_cloud__h4OPK",wrapperWeather:"AppModules_wrapperWeather__Zw0jv",loader:"AppModules_loader__1ooBM",secondLoading:"AppModules_secondLoading__VKdd5",dayOftheWeek:"AppModules_dayOftheWeek__3td_-",temp:"AppModules_temp__2zCut",day:"AppModules_day__1mca1",suggestList:"AppModules_suggestList__rC0Ms",suggest:"AppModules_suggest__7zHF0",weekWeather:"AppModules_weekWeather__3hxg_",img:"AppModules_img__3yxYz","App-logo":"AppModules_App-logo__3VHtv","App-logo-spin":"AppModules_App-logo-spin__2R1x4"}},63:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),o=a.n(s),i=a(5),c=a.n(i),r=(a(29),a(16)),p=a(17),d=a(6),l=a(23),h=a(22),u=a(3),_=a.n(u),m=a(18),g=a(21),j=a(8),b=a(20),y=a.n(b),O=a(56),A=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={loading:!0,suggest:""},O(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getCity("moscow")}},{key:"getDailyWeather",value:function(e,t){var a=this;this.setState({loading:!0});var n="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&&appid=eb93e97d16b687445b44bc92192ea7bb&units=metric");fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){function t(e){var t=new Date(1e3*e),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],n=t.getFullYear(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+s+" "+n+" "+a}var n=e.daily.slice(1).map((function(e){return{temp:e.temp.day,day:t(e.dt)}}));a.props.addDataDailyWeather(n),a.setState({loading:!1})})).catch((function(e){console.error(e),a.setState({loading:!1})}))}},{key:"getCity",value:function(e){var t=this;this.setState({loading:!0});var a="http://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=eb93e97d16b687445b44bc92192ea7bb&units=metric");fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e.weather[0].icon),t.props.addData(e.name,e.main.temp,e.weather[0].description,e.main.temp_min,e.main.temp_max,e.coord.lat,e.coord.lon,e.weather[0].icon),t.getDailyWeather(e.coord.lat,e.coord.lon),t.setState({loading:!1})})).catch((function(e){console.error(e),t.setState({loading:!1})}))}},{key:"onInputOnChange",value:function(e){var t=e.target.value;this.setState({name:t});var a=window.suggest.filter((function(e){return e.toLowerCase().startsWith(t.toLowerCase())})).map((function(e){return Object(n.jsx)("div",{children:e})}));console.log(a),this.setState({suggest:a.slice(0,9)})}},{key:"onSearchClick",value:function(){this.getCity(this.state.name),this.setState({name:""})}},{key:"render",value:function(){var e="http://openweathermap.org/img/wn/".concat(this.props.icon,"@2x.png");return String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},this.state.loading&&!this.props.name?Object(n.jsx)("div",{className:_.a.loader,children:Object(n.jsx)(y.a,{type:"Oval",color:"#515ada",height:80,width:80,timeout:3e3})}):Object(n.jsx)("div",{className:_.a.App,children:Object(n.jsx)("div",{className:_.a.wrapper,children:Object(n.jsxs)("div",{className:_.a.weatherInfo,children:[Object(n.jsxs)("div",{className:_.a.suggestList,children:[Object(n.jsxs)("div",{className:_.a.search,children:[Object(n.jsx)("input",{className:_.a.textField,value:this.state.name,onChange:this.onInputOnChange,placeholder:"Enter a city"}),Object(n.jsx)("div",{className:_.a.icon,onClick:this.onSearchClick,children:Object(n.jsx)(m.a,{icon:g.a})})]}),this.state.suggest&&Object(n.jsx)("div",{className:_.a.suggest,children:this.state.suggest})]}),Object(n.jsxs)("div",{className:_.a.wrapperWeather,children:[Object(n.jsx)("div",{className:_.a.name,children:this.props.name}),Object(n.jsx)("div",{className:_.a.img,children:Object(n.jsx)("img",{src:e})}),Object(n.jsx)("div",{className:_.a.cloud,children:this.props.weather.capitalize()}),Object(n.jsx)("div",{className:_.a.degree,children:Math.round(this.props.temp)}),Object(n.jsxs)("div",{className:_.a.extraWeatherInfo,children:[Object(n.jsxs)("div",{className:_.a.min,children:["Min: ",Math.floor(this.props.tempMin)]}),Object(n.jsx)("span",{children:","}),Object(n.jsxs)("div",{className:_.a.max,children:["Max: ",Math.ceil(this.props.tempMax)]})]})]}),this.props.week&&Object(n.jsx)("div",{className:_.a.dayOftheWeek,children:this.props.week.map((function(e){return Object(n.jsxs)("div",{className:_.a.weekWeather,children:[Object(n.jsx)("div",{className:_.a.day,children:e.day})," ",Object(n.jsx)("div",{className:_.a.temp,children:Math.round(e.temp)})]},e.day)}))})]})})})}}]),a}(o.a.Component),v={addData:function(e,t,a,n,s,o,i,c){return{type:"ADD_DATA",payload:{name:e,temp:t,weather:a,tempMin:n,tempMax:s,lat:o,lon:i,icon:c}}},addDataDailyWeather:function(e){return{type:"ADD_DATA_DAILY_WEATHER",payload:{week:e}}}},x=Object(j.b)((function(e){return e}),v)(A),M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,64)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),o(e),i(e)}))},w=a(7),f=a(14),D={},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DATA":return{name:t.payload.name,temp:t.payload.temp,weather:t.payload.weather,tempMin:t.payload.tempMin,tempMax:t.payload.tempMax,lat:t.payload.lat,lon:t.payload.lon,icon:t.payload.icon};case"ADD_DATA_DAILY_WEATHER":return Object(f.a)(Object(f.a)({},e),{},{week:t.payload.week});default:return e}},k=Object(w.b)(N,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(j.a,{store:k,children:Object(n.jsx)(x,{})})}),document.getElementById("root")),M()}},[[63,1,2]]]);
//# sourceMappingURL=main.5d480137.chunk.js.map